<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>미래 월급 테스트</title>
    <meta property="og:url" content="https://future-salary-test.pages.dev">
    <meta property="og:type" content="website">
    <meta name="description" content="AI가 당신의 미래 월급을 예측해드립니다. 무료 관상 테스트를 통해 당신의 운명적인 연봉을 확인하고, 재물운을 높이는 관상학 칼럼을 확인하세요.">
    <meta name="keywords" content="무료 관상 테스트, AI 연봉 예측, 미래 월급, 관상학, 재물운, 운명, 셀카 관상, 얼굴 분석, 연봉 테스트">
    <meta property="og:title" content="AI 미래 월급 테스트">
    <meta property="og:description" content="내 관상으로 보는 미래 연봉은 얼마일까? 지금 바로 확인하세요!">
    <meta property="og:image" content="">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>💰</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script> <!-- Confetti library -->
    <!-- Kakao SDK -->
    <script src='https://t1.kakaocdn.net/kakao_js_sdk/2.7.1/kakao.min.js' integrity='sha384-kDljxUXHaJ9xAb2AzRd59KxjrFjzHa5TAoFQ6GbYTCAG0bjM55XohjjDT7tDDC01' crossorigin='anonymous'></script>
    <style>
        /* Global & Reset Styles */
        * {
            box-sizing: border-box;
        }
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 60px; /* Offset for fixed header height */
        }
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 0;
            color: #333;
            text-align: center;
            line-height: 1.6;
        }

        /* Header Styles */
        #main-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 60px;
            z-index: 1000;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px; /* Added padding */
            box-sizing: border-box; /* Added box-sizing */
        }
        .header-logo {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
        }
        #hamburger-btn {
            background: none;
            border: none;
            font-size: 24px; /* Adjusted font-size */
            cursor: pointer; /* Added cursor pointer */
            color: #333;
            display: block;
        }

        /* Mobile Menu Styles */
        #mobile-menu {
            position: fixed;
            top: 0;
            right: -100%; /* Initially hidden */
            width: 250px;
            max-width: 80%; /* Responsive width */
            height: 100%;
            background-color: #f8f8f8;
            box-shadow: -2px 0 5px rgba(0,0,0,0.1);
            z-index: 1001;
            transition: right 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
            padding-top: 60px; /* Space below header */
        }
        #mobile-menu.open {
            right: 0; /* Slide in */
        }
        #close-menu-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 2em;
            cursor: pointer;
            color: #333;
            display: block; /* Ensure it's visible */
        }
        #mobile-menu ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        #mobile-menu li {
            border-bottom: 1px solid #eee; /* Separator for menu items */
        }
        #mobile-menu li:last-child {
            border-bottom: none;
        }
        .menu-item {
            display: block;
            padding: 15px 20px;
            text-decoration: none;
            color: #333;
            font-size: 1.1em;
        }
        .menu-item:hover {
            background-color: #e9e9e9;
        }
        
        /* Main Content Container (redefined for layout reset) */
        .container { /* This targets #home-section */
            background-color: #ffffff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            max-width: 600px; /* User specified */
            width: 100%;
            display: flex; /* For internal flex layout */
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 80px auto 0; /* User specified margin-top for header offset + auto for centering */
            position: relative; /* For z-index or other positioning if needed */
        }

        /* General element styles (previously inline or in original .container) */
        h1 {
            color: #333;
            margin-bottom: 15px;
            font-size: 2.5em;
            font-weight: 900;
        }
        .mode-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .mode-button {
            background: #f0f2f5;
            color: #555;
            border: none;
            border-radius: 20px;
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .mode-button.active, .mode-button:hover {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .input-section {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        /* File Upload Styles */
        .file-upload-wrapper {
            width: 100%;
            position: relative;
        }
        .file-upload-label {
            display: inline-block;
            background: linear-gradient(45deg, #4CAF50, #66BB6A);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        .file-upload-label:hover {
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }
        #image-upload {
            display: none;
        }

        /* Webcam Styles */
        #webcam-view {
            width: 100%;
            max-width: 400px;
            border-radius: 10px;
            border: 2px solid #ddd;
            display: none;
        }
        #webcam-button {
            background: linear-gradient(45deg, #FFC107, #FFA000);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            width: 80%;
            max-width: 250px;
            display: none;
        }
        #webcam-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        #image-preview {
            max-width: 100%;
            max-height: 250px;
            height: auto;
            border-radius: 10px;
            border: 2px dashed #ddd;
            object-fit: contain;
            margin-top: 15px;
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        #check-salary-button, #share-button {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 80%;
            max-width: 300px;
            margin-top: 20px;
        }
        #kakao-share-button, #reset-button {
            background-color: #FEE500;
            color: #3C1E1E;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 80%;
            max-width: 300px;
            margin-top: 10px;
        }
        #share-button {
            margin-top: 20px;
        }
        #check-salary-button:hover, #share-button:hover, #kakao-share-button:hover, #reset-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        #check-salary-button:disabled {
            background: linear-gradient(45deg, #cccccc, #aaaaaa);
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        
        #loading-message {
            font-size: 1.5em;
            font-weight: bold;
            color: #555;
            margin-top: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            display: none; 
        }
        /* CSS Spinner */
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #result-text {
            font-size: 2.2em;
            font-weight: 900;
            color: #2c3e50;
            margin-top: 30px;
            word-break: keep-all;
            line-height: 1.4;
        }
        #salary-amount {
            font-size: 2.8em;
            font-weight: bold;
            color: #007bff;
            margin-top: 10px;
        }

        /* Footer Styles */
        #footer {
            margin-top: 40px;
            padding: 20px;
            text-align: center;
            font-size: 0.85em;
            color: #777;
        }
        #footer p {
            margin-bottom: 10px;
        }
        #footer a {
            color: #777;
            text-decoration: none;
            margin: 0 10px;
        }
        #footer a:hover {
            text-decoration: underline;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            #main-header {
                padding: 0 15px;
            }
            .header-logo {
                font-size: 1.3em;
            }
            #hamburger-btn {
                font-size: 1.8em;
            }
            #mobile-menu {
                width: 70%; /* Adjust width for smaller screens */
            }
            .container { /* Specific adjustment for main content container */
                 margin-top: 70px; /* A bit more top margin for smaller screens */
            }
        }
        /* Card Link Buttons */
        .card-link-container {
            width: 100%;
            max-width: 600px;
            margin: 40px auto 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding: 0 20px;
        }

        .card-link {
            display: block;
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            padding: 20px 25px;
            text-decoration: none;
            color: #333;
            font-size: 1.3em;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card-link:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .card-link::after {
            content: '>';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
            color: #007bff;
            transition: right 0.3s ease;
        }

        .card-link:hover::after {
            right: 15px;
        }

        /* Section for additional text */
        .info-section {
            width: 100%;
            max-width: 600px;
            margin: 20px auto;
            padding: 25px;
            background-color: #f8f9fa;
            border-radius: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            text-align: left;
            color: #333;
        }
        .info-section h2 {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 700;
        }
        .info-section h3 {
            font-size: 1.3em;
            color: #0056b3;
            margin-bottom: 10px;
            font-weight: 600;
        }
        .info-section p {
            font-size: 0.95em;
            line-height: 1.6;
            color: #555;
            margin-bottom: 15px;
        }
        .info-section p:last-child {
            margin-bottom: 0;
        }
        .privacy-alert {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 1em;
            line-height: 1.5;
            text-align: center;
        }
    </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8318272387440643"
     crossorigin="anonymous"></script>
</head>
<body>
    <header id="main-header">
        <a href="index.html" class="header-logo">미래 월급 테스트</a>
        <button id="hamburger-btn">☰</button>
    </header>

    <!-- Slide-in Menu -->
    <nav id="mobile-menu">
        <button id="close-menu-btn">X</button>
        <ul>
            <li><a href="index.html" class="menu-item">홈으로</a></li>
            <li><a href="column.html" class="menu-item">관상학 칼럼</a></li>
            <li><a href="about.html" class="menu-item">서비스 소개</a></li>
            <li><a href="blog.html" class="menu-item">블로그</a></li>
            <li><a href="#footer" class="menu-item">문의하기</a></li>
        </ul>
    </nav>

    <!-- Main Content Container -->
    <div id="home-section" class="container">
        <h1>미래 월급 테스트 💰</h1>
        <div class="privacy-alert">
            <strong>⚠️ 중요:</strong> 고객님의 사진은 외부 서버로 <strong>절대 전송되거나 저장되지 않습니다.</strong> 모든 AI 분석은 사용자 기기(브라우저) 내에서만 이루어집니다. 안심하고 이용해주세요!
        </div>
        
        <!-- New "사진 찍기 / 업로드" button -->
        <button id="open-file-dialog-button" class="mode-button" onclick="document.getElementById('image-upload-hidden').click()">📸 사진 찍기 / 업로드</button>

        <!-- Hidden input for file upload -->
        <input type="file" id="image-upload-hidden" accept="image/*" style="display: none;">
        
        <!-- Image preview -->
        <img id='uploaded-image' src='#' style='display:none; max-width:100%; max-height: 250px; border-radius: 10px; border: 2px dashed #ddd; object-fit: contain; margin-top: 15px;'>
        <button id="check-salary-button" disabled>월급 확인하기</button>
        <!-- Loading message with spinner -->
        <p id="loading-message">
            <span class="spinner"></span> AI가 분석 중입니다...
        </p>
        <p id="result-text"></p>
        <p id="salary-amount"></p> <!-- Add element for numerical salary -->
        <button id="share-button" style="display:none;">🔗 결과 공유하기</button> <!-- Web Share button -->
        <button id="kakao-share-button" style="display:none;">💬 카카오톡 공유하기</button> <!-- Kakao Share button -->
        <button id="reset-button" style="display:none;">🔄 다시하기</button> <!-- Reset button -->
    </div>

    <!-- Card Link Buttons -->
    <div class="card-link-container">
        <a href="column.html" class="card-link">💰 부자 관상학 칼럼 보러가기 ></a>
        <a href="about.html" class="card-link">🤖 AI 분석 원리 알아보기 ></a>
    </div>

    <!-- 사용 방법 (3단계) -->
    <section class="info-section">
        <h2>✨ 사용 방법 (3단계)</h2>
        <h3>1. 사진 준비</h3>
        <p>선명하고 얼굴이 잘 보이는 셀카나 정면 사진을 준비해 주세요. 안경이나 모자는 벗고 촬영하는 것이 AI 정확도를 높이는 데 도움이 됩니다.</p>
        <h3>2. AI 분석 시작</h3>
        <p>준비된 사진을 업로드하거나 즉석에서 촬영하여 AI가 당신의 관상을 분석하도록 해주세요. 잠시 기다리면 분석 결과가 나타납니다.</p>
        <h3>3. 결과 확인 및 공유</h3>
        <p>AI가 예측한 당신의 미래 월급과 함께 흥미로운 메시지를 확인하세요. 친구들과 결과를 공유하며 재미를 더할 수 있습니다.</p>
    </section>

    <!-- AI 관상 분석 원리 요약 -->
    <section class="info-section">
        <h2>🤖 AI 관상 분석 원리 요약</h2>
        <p>
            저희 서비스는 구글의 Teachable Machine 2.0과 TensorFlow.js를 활용하여 작동합니다. 이는 수많은 관상 데이터를 학습한 인공지능 모델이 얼굴의 특정 특징(눈, 코, 입, 이마 등)을 정밀하게 측정하고 분석하여 통계적 상관관계를 도출합니다. 사용자의 사진은 오직 기기 내에서만 처리되며, 외부 서버로 전송되거나 저장되지 않아 안심하고 이용할 수 있습니다. AI는 학습된 패턴을 기반으로 미래 월급을 예측하지만, 이는 100% 정확한 예언이 아닌 재미와 자기 성찰을 위한 도구임을 기억해주세요.
        </p>
    </section>

    <footer id="footer">
        <p>&copy; 2026 미래 월급 테스트. All rights reserved.</p>
        <p>
            <a href="terms.html">이용약관</a> |
            <a href="privacy.html">개인정보처리방침</a> |
            <a href="mailto:rkd743194@gmail.com">문의하기</a>
        </p>
    </footer>

    <script type="text/javascript">
        const URL = "https://teachablemachine.withgoogle.com/models/OgIgQ0pYA/";
        
        const richMessages = [
            '숨만 쉬어도 돈이 들어오는 관상',
            '걸어 다니는 중소기업',
            '전생에 나라를 구함',
            '조물주 위에 건물주',
            '재벌 3세의 기운이 느껴짐'
        ];
        const middleClassMessages = [
            '어딜 가나 환영받는 인재',
            '워라밸을 즐기는 능력자',
            '부장님 소리 듣는 관상',
            '실속 챙기는 알부자',
            '안정적인 자산가'
        ];
        const poorMessages = [
            '티끌 모아 태산! 성실함이 무기',
            '대기만성형! 늦게 터집니다',
            '돈보다 명예를 좇는 예술가',
            '지금은 힘들어도 끝은 창대하리라',
            '로또 당첨을 노려보세요'
        ];
        let model, maxPredictions;
        let webcamStream = null; // No longer used, but keeping for now as a placeholder for removed content, will delete in next step

        // DOM elements
        const openFileDialogButton = document.getElementById('open-file-dialog-button'); // New button
        const imageUploadHidden = document.getElementById('image-upload-hidden'); // New hidden input
        const uploadedImage = document.getElementById('uploaded-image'); // New image preview
        const checkSalaryButton = document.getElementById('check-salary-button');
        const loadingMessage = document.getElementById('loading-message');
        const resultText = document.getElementById('result-text');
        const salaryAmountDisplay = document.getElementById('salary-amount'); // New element
        const shareButton = document.getElementById('share-button'); // Web Share button element
        const kakaoShareButton = document.getElementById('kakao-share-button'); // Kakao Share button element
        const resetButton = document.getElementById('reset-button'); // Reset button element

        // Initial mode is implicitly 'upload'
        // No currentMode variable or switchMode function needed as only one mode exists.

        // Initialize Kakao SDK
        // Kakao.init should be called outside of async functions
        // It needs to be called after the SDK script is loaded.
        if (Kakao && !Kakao.isInitialized()) {
            Kakao.init('783d4abe65a9e7fd57276ee69d32fc04');
            console.log('Kakao SDK initialized:', Kakao.isInitialized());
        }


        async function init() {
            const modelURL = URL + "model.json";
            const metadataURL = URL + "metadata.json";

            model = await tmImage.load(modelURL, metadataURL);
            maxPredictions = model.getTotalClasses();
            
            console.log("Teachable Machine 모델 로드 완료!");
            // No mode switching needed, directly prepare for upload logic
        }

        // --- Confetti Function ---
        function triggerConfetti() {
            const confettiEmojis = ['💸', '💰']; // Emojis for confetti
            const defaults = {
                spread: 360,
                ticks: 50,
                gravity: 0.5,
                decay: 0.94,
                startVelocity: 30,
                colors: ['#FFD700', '#C0C0C0', '#DAA520', '#FFFFFF'] // Gold, Silver, Goldenrod, White
            };

            function fire(particleRatio, opts) {
                confetti(Object.assign({}, defaults, opts, {
                    particleCount: Math.floor(200 * particleRatio),
                    shapes: ['emoji'],
                    shapeOptions: {
                        emoji: confettiEmojis
                    }
                }));
            }

            fire(0.25, {
                spread: 26,
                startVelocity: 55,
            });
            fire(0.2, {
                spread: 60,
            });
            fire(0.35, {
                spread: 100,
                decay: 0.91,
                scalar: 0.8
            });
            fire(0.1, {
                spread: 120,
                startVelocity: 25,
                decay: 0.92,
                scalar: 1.2
            });
            fire(0.1, {
                spread: 120,
                startVelocity: 45,
            });
        }


        // --- Reset Function ---
        function resetResults() {
            resultText.textContent = '';
            salaryAmountDisplay.textContent = '';
            loadingMessage.style.display = 'none'; // Hide spinner
            shareButton.style.display = 'none';
            kakaoShareButton.style.display = 'none';
            resetButton.style.display = 'none'; // Hide reset button
        }
        
        function resetTest() {
            resetResults();
            uploadedImage.src = '#'; // Use new image element
            uploadedImage.style.opacity = '0'; // Start fade out
            setTimeout(() => { // Wait for fade out to complete before hiding
                uploadedImage.style.display = 'none'; 
            }, 500); 
            checkSalaryButton.disabled = true;
            // No mode switching needed
        }
        resetButton.addEventListener('click', resetTest);


        // --- Image Upload Logic ---
        imageUploadHidden.addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    uploadedImage.src = e.target.result;
                    uploadedImage.style.display = 'block'; // Use display: block
                    setTimeout(() => uploadedImage.style.opacity = '1', 10); // Fade in
                    checkSalaryButton.disabled = false; // Enable button after photo
                    resetResults(); // Clear previous results and hide share/reset buttons
                };
                reader.readAsDataURL(file);
            } else {
                uploadedImage.src = '#';
                uploadedImage.style.opacity = '0'; // Start fade out
                setTimeout(() => { // Wait for fade out to complete before hiding
                    uploadedImage.style.display = 'none'; 
                }, 500);
                checkSalaryButton.disabled = true;
                resetResults();
            }
        });

        // --- Utility for Random Numbers ---
        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // --- Utility for Korean Won Formatting ---
        function formatKoreanWon(amount) {
            const manUnit = 10000;
            if (amount >= manUnit) {
                const millions = Math.floor(amount / manUnit);
                return `월 ${millions.toLocaleString()}만 원`;
            } else {
                return `월 ${amount.toLocaleString()}원`;
            }
        }


        // --- Prediction Logic ---
        checkSalaryButton.addEventListener('click', predict);

        async function predict() {
            if (!uploadedImage.src || uploadedImage.style.display === 'none') { // Check display for prediction
                alert("먼저 이미지를 업로드하거나 촬영해주세요!");
                return;
            }

            loadingMessage.style.display = 'flex'; // Show loading message with spinner
            resetResults(); // Clear previous results and hide share/reset buttons (except loading itself)
            checkSalaryButton.disabled = true; // 분석 중에는 버튼 비활성화

            await new Promise(resolve => setTimeout(resolve, 1000)); // 1초 대기

            // Use uploadedImage directly for prediction
            const prediction = await model.predict(uploadedImage);
            
            loadingMessage.style.display = 'none'; // Hide loading message
            checkSalaryButton.disabled = false; // 버튼 다시 활성화

            let resultMessage = "분석 결과가 명확하지 않습니다. 다른 사진으로 다시 시도해주세요!";
            let salaryAmountNum = 0; // Raw numerical amount
            let highestProbability = 0;
            let predictedClass = '';

            for (let i = 0; i < maxPredictions; i++) {
                if (prediction[i].probability.toFixed(2) > highestProbability) {
                    highestProbability = prediction[i].probability.toFixed(2);
                    predictedClass = prediction[i].className;
                }
            }
            
            switch (predictedClass) {
                case "Class 1": 
                case "부자": 
                    resultMessage = richMessages[Math.floor(Math.random() * richMessages.length)] + " 예상 월급 ";
                    salaryAmountNum = getRandomInt(8_000_000, 30_000_000); // 월 800만 ~ 3,000만
                    break;
                case "Class 2":
                case "중산층":
                    resultMessage = middleClassMessages[Math.floor(Math.random() * middleClassMessages.length)] + " 예상 월급 ";
                    salaryAmountNum = getRandomInt(3_500_000, 6_000_000); // 월 350만 ~ 600만
                    break;
                case "Class 3":
                case "거지":
                    resultMessage = poorMessages[Math.floor(Math.random() * poorMessages.length)] + " 예상 월급 ";
                    salaryAmountNum = getRandomInt(2_200_000, 3_000_000); // 월 220만 ~ 300만
                    break;
                default:
                    resultMessage = "알 수 없는 결과입니다. 다시 시도해주세요!";
                    salaryAmountNum = 0;
            }

            resultText.innerHTML = resultMessage;
            if (salaryAmountNum > 0) {
                salaryAmountDisplay.textContent = formatKoreanWon(salaryAmountNum);
                triggerConfetti(); // Trigger confetti when salary amount is displayed

                // Show share buttons if available
                if (navigator.share) {
                    shareButton.style.display = 'block';
                }
                if (Kakao.isInitialized()) {
                    kakaoShareButton.style.display = 'block';
                }
                resetButton.style.display = 'block'; // Show reset button after result
            }
        }

        // --- Web Share Button Logic ---
        shareButton.addEventListener('click', async () => {
            if (navigator.share) {
                try {
                    const shareData = {
                        title: '미래 월급 테스트 결과',
                        text: `${resultText.textContent}${salaryAmountDisplay.textContent} 에서 나도 미래 월급을 확인해보세요!`,
                        url: window.location.href
                    };
                    await navigator.share(shareData);
                    console.log('Web Share successful');
                } catch (error) {
                    console.error('Error sharing via Web Share:', error);
                    // User might have cancelled the share, or an error occurred
                }
            } else {
                alert('이 브라우저에서는 공유하기 기능을 지원하지 않습니다.');
                console.log('Web Share API not supported in this browser.');
            }
        });

        // --- Kakao Share Function ---
        function shareKakao() {
            if (Kakao.isInitialized()) {
                Kakao.Share.sendDefault({
                    objectType: 'feed',
                    content: {
                        title: '미래 월급 관상 테스트',
                        description: `AI가 분석한 내 미래 월급은 ${resultText.textContent}${salaryAmountDisplay.textContent} 에서 나도 미래 월급을 확인해보세요!`,
                        link: {
                            webUrl: 'https://future-salary-test.pages.dev',
                        },
                    },

                });
            } else {
                alert('카카오 SDK가 초기화되지 않았습니다.');
                console.error('Kakao SDK not initialized.');
            }
        }
        kakaoShareButton.addEventListener('click', shareKakao);

        init(); // 페이지 로드 시 모델 초기화

        // --- Hamburger Menu Toggle Logic ---
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const closeMenuBtn = document.getElementById('close-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const menuItems = document.querySelectorAll('#mobile-menu .menu-item');

        hamburgerBtn.addEventListener('click', () => {
            mobileMenu.classList.add('open');
        });

        closeMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.remove('open');
        });

        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                mobileMenu.classList.remove('open'); // Close menu on item click
            });
        });
    </script>
</body>
</html>